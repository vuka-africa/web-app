<!-- Modern Material Design 3 Login Layout -->
<div class="login-wrapper">
  <!-- Left Panel - Hero Section (Hidden on mobile) -->
  <div class="hero-panel hide-lt-md">
    <div class="hero-overlay"></div>
    <div class="hero-content">
      <div class="hero-text">
        <h1 class="hero-title">{{ 'APP_NAME' | translate }}</h1>
        <p class="hero-subtitle">
          {{ 'labels.text.A' | translate }}
          <span class="hero-highlight">{{ 'labels.text.global community' | translate }}</span>
          {{ 'labels.text.elimination of poverty' | translate }}
        </p>
        <div class="hero-features">
          <div class="feature-item">
            <fa-icon icon="shield-alt" class="feature-icon"></fa-icon>
            <span class="feature-text">{{ 'labels.heading.Secure & Reliable' | translate }}</span>
          </div>
          <div class="feature-item">
            <fa-icon icon="users" class="feature-icon"></fa-icon>
            <span class="feature-text">{{ 'labels.heading.Community Driven' | translate }}</span>
          </div>
          <div class="feature-item">
            <fa-icon icon="globe" class="feature-icon"></fa-icon>
            <span class="feature-text">{{ 'labels.heading.Global Impact' | translate }}</span>
          </div>
        </div>
        <div class="hero-links">
          <a [href]="'mifosHome' | documentationLink" target="_blank" rel="noopener noreferrer" class="hero-link">
            {{ 'labels.text.Mifos Initiative' | translate }}
            <fa-icon icon="external-link-alt" size="sm"></fa-icon>
          </a>
          <a [href]="'mifosVolunteer' | documentationLink" target="_blank" rel="noopener noreferrer" class="hero-link">
            {{ 'labels.text.Get involved' | translate }}
            <fa-icon icon="external-link-alt" size="sm"></fa-icon>
          </a>
        </div>
      </div>
      <mifosx-footer variant="compact"></mifosx-footer>
    </div>
  </div>

  <!-- Right Panel - Login Form -->
  <div class="login-panel">
    <!-- Header Controls -->
    <div class="login-header">
      @if (allowServerSwitch()) {
        <mifosx-server-selector class="header-control" appearance="outline" [showLabel]="false">
        </mifosx-server-selector>
      }
      <mifosx-theme-toggle class="header-control theme-toggle"></mifosx-theme-toggle>
      <mifosx-language-selector class="header-control" appearance="outline" [showLabel]="false">
      </mifosx-language-selector>
    </div>

    <!-- Main Login Card -->
    <div class="login-card-container">
      <div class="login-card">
        <!-- Logo Section -->
        <div class="logo-section">
          @if (!themeDarkEnabled) {
            <img [src]="logoPath" (error)="onLogoError()" alt="{{ 'APP_NAME' | translate }} Logo" class="logo-image" />
          } @else {
            <img src="assets/images/white-mifos.png" alt="{{ 'APP_NAME' | translate }} Logo" class="logo-image" />
          }
          <h2 class="welcome-text">{{ 'labels.heading.Welcome to Mifos' | translate }}</h2>
        </div>

        <!-- Form Section -->
        <div class="form-section">
          <!-- Tenant Selector -->
          @if (displayTenantSelector()) {
            <div class="tenant-section">
              <mifosx-tenant-selector></mifosx-tenant-selector>
            </div>
          }

          <!-- Login Forms -->
          @if (!resetPassword && !twoFactorAuthenticationRequired) {
            <mifosx-login-form></mifosx-login-form>
          }

          @if (resetPassword) {
            <mifosx-reset-password></mifosx-reset-password>
          }

          @if (twoFactorAuthenticationRequired) {
            <mifosx-two-factor-authentication></mifosx-two-factor-authentication>
          }
        </div>

        <!-- Resources Links -->
        <div class="resources-section">
          <div class="resources-divider">
            <span class="divider-text">{{ 'labels.links.Resources' | translate }}</span>
          </div>
          <div class="resources-links">
            <button mat-button [matMenuTriggerFor]="resourcesMenu" class="resource-button">
              <fa-icon icon="book" size="sm"></fa-icon>
              {{ 'labels.links.Resources' | translate }}
            </button>
            <button mat-button [matMenuTriggerFor]="communityMenu" class="resource-button">
              <fa-icon icon="users" size="sm"></fa-icon>
              {{ 'labels.links.Community' | translate }}
            </button>
            <button mat-button [matMenuTriggerFor]="contributeMenu" class="resource-button">
              <fa-icon icon="heart" size="sm"></fa-icon>
              {{ 'labels.links.Contribute' | translate }}
            </button>
          </div>
        </div>
      </div>

      <!-- Footer -->
      <div class="login-footer">
        <div class="layout-column copy-label">
          <p class="footer-content align-center">
            {{ 'APP_NAME' | translate }} {{ 'labels.text.by' | translate }} Mifos
          </p>
        </div>
        <button
          mat-icon-button
          (click)="reloadSettings()"
          class="reload-button"
          matTooltip="Reload Settings"
          attr.aria-label="Reload Settings"
        >
          <mifosx-m3-icon name="refresh"></mifosx-m3-icon>
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Resource Menus -->
<mat-menu #resourcesMenu="matMenu" class="modern-menu">
  <a [href]="'userManual' | documentationLink" target="_blank" rel="noopener noreferrer" mat-menu-item>
    <fa-icon icon="book-open" class="menu-icon"></fa-icon>
    {{ 'labels.links.User Manual' | translate }}
  </a>
  <a [href]="'fineractFunctionalSpecs' | documentationLink" target="_blank" rel="noopener noreferrer" mat-menu-item>
    <fa-icon icon="file-alt" class="menu-icon"></fa-icon>
    {{ 'labels.links.Functional Specifications' | translate }}
  </a>
  <a [href]="'fineractContributorZone' | documentationLink" target="_blank" rel="noopener noreferrer" mat-menu-item>
    <fa-icon icon="code" class="menu-icon"></fa-icon>
    {{ 'labels.links.Developer Zone' | translate }}
  </a>
</mat-menu>

<mat-menu #communityMenu="matMenu" class="modern-menu">
  <a [href]="'mifosUserGroup' | documentationLink" target="_blank" rel="noopener noreferrer" mat-menu-item>
    <fa-icon icon="users" class="menu-icon"></fa-icon>
    {{ 'labels.links.User Group' | translate }}
  </a>
  <a [href]="'mifosDeveloperGroup' | documentationLink" target="_blank" rel="noopener noreferrer" mat-menu-item>
    <fa-icon icon="laptop-code" class="menu-icon"></fa-icon>
    {{ 'labels.links.Developer Group' | translate }}
  </a>
  <a [href]="'mifosIrc' | documentationLink" target="_blank" rel="noopener noreferrer" mat-menu-item>
    <fa-icon icon="comments" class="menu-icon"></fa-icon>
    {{ 'labels.links.IRC' | translate }}
  </a>
</mat-menu>

<mat-menu #contributeMenu="matMenu" class="modern-menu">
  <a [href]="'keyDesignPrinciples' | documentationLink" target="_blank" rel="noopener noreferrer" mat-menu-item>
    <fa-icon icon="lightbulb" class="menu-icon"></fa-icon>
    {{ 'labels.links.Key Design Principles' | translate }}
  </a>
  <a [href]="'sourceforgeMifos' | documentationLink" target="_blank" rel="noopener noreferrer" mat-menu-item>
    <fa-icon icon="code-branch" class="menu-icon"></fa-icon>
    {{ 'labels.links.Working with Code' | translate }}
  </a>
  <a [href]="'mifosDonate' | documentationLink" target="_blank" rel="noopener noreferrer" mat-menu-item>
    <fa-icon icon="hand-holding-heart" class="menu-icon"></fa-icon>
    {{ 'labels.links.Donate' | translate }}
  </a>
</mat-menu>
